</div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        async function updateMenu() {
            const token = localStorage.getItem('token');
            
            const loginLink = document.getElementById('loginLink');
            const registerLink = document.getElementById('registerLink');
            const createPostLink = document.getElementById('createPostLink');
            const profileLink = document.getElementById('profileLink');
            const logoutBtn = document.getElementById('logoutBtn');
            const userNameDisplay = document.getElementById('userNameDisplay'); 

            if (token) {
                if(loginLink) loginLink.classList.add('d-none');
                if(registerLink) registerLink.classList.add('d-none');
                
                if(createPostLink) createPostLink.classList.remove('d-none');
                if(profileLink) profileLink.classList.remove('d-none');
                if(logoutBtn) logoutBtn.classList.remove('d-none');

                try {
                    const res = await fetch('/api/users/profile', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    if (res.ok) {
                        const user = await res.json();
                        if (userNameDisplay) {
                            userNameDisplay.classList.remove('d-none');
                            userNameDisplay.querySelector('span').innerText = `ðŸ‘‹ Hi, ${user.username}`;
                        }
                    }
                } catch (e) {
                    console.error(e);
                }

            } else {
                if(loginLink) loginLink.classList.remove('d-none');
                if(registerLink) registerLink.classList.remove('d-none');
                
                if(createPostLink) createPostLink.classList.add('d-none');
                if(profileLink) profileLink.classList.add('d-none');
                if(logoutBtn) logoutBtn.classList.add('d-none');
                if(userNameDisplay) userNameDisplay.classList.add('d-none');
            }
        }

        updateMenu();

        const btn = document.getElementById('logoutBtn');
        if (btn) {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.removeItem('token');
                window.location.href = '/login';
            });
        }
    </script>
</body>
</html>